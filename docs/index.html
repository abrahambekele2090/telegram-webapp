<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ultimate Telegram App</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --bg:#0e1621; --card:rgba(255,255,255,.12);
  --text:#fff; --accent:#2aabee;
}

body {
  margin:0; height:100vh;
  background:var(--bg);
  font-family:system-ui;
  display:flex; justify-content:center; align-items:center;
}

.cards {
  display:flex; width:400%;
  transition:transform .45s cubic-bezier(.22,.61,.36,1);
}

.card {
  width:100%; padding:26px;
  margin:0 8px;
  background:var(--card);
  border-radius:28px;
  backdrop-filter:blur(20px);
  color:var(--text);
}

button {
  width:100%; padding:16px;
  margin-top:14px;
  border-radius:16px;
  border:none;
  background:var(--accent);
  color:white; font-weight:600;
}
</style>
</head>

<body>
<div class="cards" id="cards">

<!-- HOME -->
<div class="card">
  <h2>üè† Home</h2>
  <button onclick="go(1)">üìä Stats</button>
  <button onclick="go(2)">‚öô Settings</button>
</div>

<!-- STATS -->
<div class="card">
  <h2>üìä Analytics</h2>
  <canvas id="chart"></canvas>
  <button onclick="go(0)">‚¨Ö Back</button>
</div>

<!-- SETTINGS -->
<div class="card">
  <h2>‚öô Settings</h2>
  <button onclick="save()">üíæ Save</button>
  <button onclick="go(0)">‚¨Ö Back</button>
</div>

<!-- ADMIN -->
<div class="card" id="admin">
  <h2>üõ° Admin</h2>
  <button onclick="admin()">Ping Bot</button>
</div>

</div>

<script>
const tg = Telegram.WebApp;
tg.expand();

// THEME SYNC
Object.entries(tg.themeParams).forEach(([k,v])=>{
  if(k.includes("bg")) document.documentElement.style.setProperty("--bg",v);
  if(k.includes("button")) document.documentElement.style.setProperty("--accent",v);
  if(k.includes("text")) document.documentElement.style.setProperty("--text",v);
});

// NAV
let index=0;
const cards=document.getElementById("cards");

function go(i){
  index=i;
  cards.style.transform=`translateX(-${i*100}%)`;
  localStorage.setItem("page",i);
  tg.HapticFeedback.impactOccurred("soft");
}

// STORAGE
function save(){
  localStorage.setItem("saved","yes");
  tg.sendData(JSON.stringify({action:"save_settings"}));
}

// ADMIN
if(tg.initDataUnsafe.user?.id === 123456789){
  document.getElementById("admin").style.display="block";
}else{
  document.getElementById("admin").style.display="none";
}

function admin(){
  tg.sendData(JSON.stringify({action:"admin_ping"}));
}

// CHART
new Chart(document.getElementById("chart"),{
  type:"line",
  data:{
    labels:["Mon","Tue","Wed","Thu","Fri"],
    datasets:[{data:[5,9,7,11,14], borderColor:tg.themeParams.button_color}]
  }
});
</script>
</body>
</html>
